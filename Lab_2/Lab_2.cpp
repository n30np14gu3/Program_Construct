#include <iostream>

using namespace std;

const int n = 4, m = 2;
double Entrkin(double X[n], double Y[n], double t)
{
	double RES = 0, q, o;

	for (int j = 0; j < n; j++)
	{

		q = 1;

		o = 1;

		for (int i = 0; i < n; i++)
		{

			if (i == j)
			{

				q *= 1; o *= 1;

			}

			else
			{

				q *= (t - X[i]);

				o *= (X[j] - X[i]);

			}

		}

		RES += Y[j] * q / o;

	}

	return RES;

}
int main()
{
	int a[m][n];
	double b, c, d, e;

	for (int i = 0; i < m; i++)
		for (int j = 0; j < n; j++)
			cin >> a[i][j];

	b = a[1][0] / ((a[0][0] - a[0][1])*(a[0][0] - a[0][2])*(a[0][0] - a[0][3])) + a[1][1] / ((a[0][1] - a[0][0])*(a[0][1] - a[0][2])*(a[0][1] - a[0][3])) + a[1][2] / ((a[0][2] - a[0][0])*(a[0][2] - a[0][1])*(a[0][2] - a[0][3])) + a[1][3] / ((a[0][3] - a[0][0])*(a[0][3] - a[0][1])*(a[0][3] - a[0][2]));
	c = -a[1][0] * (a[0][1] + a[0][2] + a[0][3]) / ((a[0][0] - a[0][1])*(a[0][0] - a[0][2])*(a[0][0] - a[0][3])) - a[1][1] * (a[0][0] + a[0][2] + a[0][3]) / ((a[0][1] - a[0][0])*(a[0][1] - a[0][2])*(a[0][1] - a[0][3])) - a[1][2] * (a[0][1] + a[0][0] + a[0][3]) / ((a[0][2] - a[0][1])*(a[0][2] - a[0][1])*(a[0][2] - a[0][3])) - a[1][3] * (a[0][0] + a[0][2] + a[0][1]) / ((a[0][3] - a[0][0])*(a[0][3] - a[0][1])*(a[0][3] - a[0][1]));
	d = a[1][0] * (a[0][1] * a[0][2] + (a[0][1] + a[0][2])*a[0][3]) / ((a[0][0] - a[0][1])*(a[0][0] - a[0][2])*(a[0][0] - a[0][3])) + a[1][1] * (a[0][0] * a[0][2] + (a[0][0] + a[0][2])*a[0][3]) / ((a[0][1] - a[0][0])*(a[0][1] - a[0][2])*(a[0][1] - a[0][3])) + a[1][2] * (a[0][0] * a[0][1] + (a[0][1] + a[0][0])*a[0][3]) / ((a[0][2] - a[0][0])*(a[0][2] - a[0][1])*(a[0][2] - a[0][3])) + a[1][3] * (a[0][1] * a[0][0] + (a[0][1] + a[0][0])*a[0][2]) / ((a[0][3] - a[0][0])*(a[0][3] - a[0][1])*(a[0][3] - a[0][2]));
	e = -a[1][0] * a[0][1] * a[0][2] * a[0][3] / ((a[0][0] - a[0][1])*(a[0][0] - a[0][2])*(a[0][0] - a[0][3])) - a[1][1] * a[0][0] * a[0][2] * a[0][3] / ((a[0][1] - a[0][0])*(a[0][1] - a[0][2])*(a[0][1] - a[0][3])) - a[1][2] * a[0][0] * a[0][1] * a[0][3] / ((a[0][2] - a[0][0])*(a[0][2] - a[0][1])*(a[0][2] - a[0][3])) - a[1][3] * a[0][0] * a[0][1] * a[0][2] / ((a[0][3] - a[0][0])*(a[0][3] - a[0][1])*(a[0][3] - a[0][2]));
	
	cout << "\n";
	cout << "f(x) = (" << b << ")*x^3 + (" << c << ")*x^2 + (" << d << ")*x + (" << e << ")";
	cout << "\n";
	int k = 8;
	double f[8];
	double p[8];
	for (int i = 0; i < k; i++)
		cin >> f[i];

	cout << "\n";
	for (int j = 0; j < k; j++)
		cin >> p[j];
	cout << "\n";
	double g, r;
	cin >> g;
	r = Entrkin(f, p, g);
	cout << r;
	system("pause");
}
